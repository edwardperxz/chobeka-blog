{% extends "admin/index.html" %}  <!-- Extiende el template original del admin -->
{% load static %}
{% load i18n %}
{% load admin_urls %}

{% block nav-global %}
  {{ block.super }}
  {% if request.user.is_staff %}
    <form method="post" action="{% url 'restart_pythonanywhere_server' %}" id="restart-form">
      {% csrf_token %}
      <button type="submit"
              id="restart-btn"
              style="
                background: none;
                border: none;
                color: #fff;
                font-size: 15px;
                font-family: inherit;
                cursor: pointer;
                padding: 0 0.5em;
                margin: 0;
                text-decoration: underline;
                transition: color 0.2s;
              "
              {% if restart_cooldown_remaining > 0 %}disabled style="opacity:0.5;cursor:not-allowed;"{% endif %}
      >
        &#x21bb; Reiniciar servidor
      </button>
      {% if restart_cooldown_remaining > 0 %}
        <span style="margin-left:8px; font-size:13px; color:#ffe;">
          No disponible. Debes esperar antes de reiniciar el servidor nuevamente.
        </span>
      {% endif %}
    </form>
  {% endif %}
{% endblock %}

{% block content %}
<!-- AÃ±ade tus estadÃ­sticas ENCIMA de las secciones predeterminadas -->
<div class="custom-stats">
    <h1>ðŸ“Š EstadÃ­sticas RÃ¡pidas</h1>
    <ul>
        <li><strong>Total de blogs:</strong> {{ total_blogs }}</li>
        <li><strong>Total de comentarios:</strong> {{ total_comments }}</li>
        <li><strong>Promedio de rating:</strong> {{ avg_rating|floatformat:2 }}</li>
    </ul>
</div>

{{ block.super }}  <!-- Esto incluye las secciones predeterminadas (Users, Groups, etc.) -->
{% endblock %}